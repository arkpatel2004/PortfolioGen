<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Classic Professional Resume</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.5;
            color: #000;
            background: #f9f9f9;
            padding: 20px;
            font-size: 11pt;
        }
        
        .resume-container {
            max-width: 8.5in;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-radius: 5px;
        }
        
        .header {
            margin-bottom: 35px;
        }
        
        .name {
            font-size: 22pt;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .title {
            font-size: 14pt;
            color: #333;
            margin-bottom: 15px;
        }
        
        .contact-info {
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
            padding: 10px 0;
            margin-bottom: 5px;
        }
        
        .contact-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
        }
        
        .contact-row:last-child {
            margin-bottom: 0;
        }
        
        .section {
            margin-bottom: 30px;
        }

        .section.hidden {
            display: none;
        }
        
        .section-title {
            font-size: 12pt;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
            border-bottom: 1px solid #333;
            padding-bottom: 2px;
        }
        
        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        .experience-item {
            margin-bottom: 18px;
        }
        
        .job-info {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .company-location {
            font-style: italic;
            margin-bottom: 3px;
            color: #444;
        }
        
        .job-dates {
            font-size: 10pt;
            color: #666;
            margin-bottom: 8px;
        }
        
        .responsibilities {
            margin-left: 0;
        }
        
        .responsibilities ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .responsibilities li {
            margin-bottom: 4px;
            text-align: justify;
        }
        
        .education-item {
            margin-bottom: 15px;
        }
        
        .degree-info {
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .school-info {
            color: #444;
            margin-bottom: 2px;
        }
        
        .education-dates {
            font-size: 10pt;
            color: #666;
            margin-bottom: 5px;
        }
        
        .education-details {
            font-size: 10pt;
        }
        
        .skills-section {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .skill-group {
            min-width: 150px;
        }
        
        .skill-title {
            font-weight: bold;
            margin-bottom: 5px;
            text-decoration: underline;
        }
        
        .skill-list {
            list-style: none;
            padding: 0;
        }
        
        .skill-list li {
            margin-bottom: 2px;
        }
        
        .objective {
            text-align: justify;
            margin-bottom: 10px;
        }
        
        .certifications-list {
            list-style: none;
            padding: 0;
        }
        
        .certifications-list li {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .cert-name {
            font-weight: bold;
        }
        
        .cert-date {
            color: #666;
            font-size: 10pt;
        }

        .projects-item {
            margin-bottom: 18px;
        }

        .project-info {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .project-tech {
            font-style: italic;
            margin-bottom: 3px;
            color: #444;
            font-size: 10pt;
        }

        .project-dates {
            font-size: 10pt;
            color: #666;
            margin-bottom: 8px;
        }

        .project-summary {
            margin-bottom: 5px;
            font-style: italic;
        }

        .languages-list {
            list-style: none;
            padding: 0;
        }

        .languages-list li {
            margin-bottom: 2px;
        }
        
        @media print {
            body { 
                padding: 0; 
            }
            .resume-container { 
                margin: 0;
                padding: 20px;
                max-width: none;
            }
        }
        
        @media (max-width: 768px) {
            .two-column-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .contact-row {
                flex-direction: column;
            }
            .skills-section {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="resume-container" id="resume">
        <div class="header">
            <div class="name" id="userName"></div>
            <div class="title" id="userTitle"></div>
            <div class="contact-info" id="contactInfo"></div>
        </div>
        
        <div class="section" id="summarySection">
            <div class="section-title">Professional Summary</div>
            <div class="objective" id="userSummary"></div>
        </div>
        
        <div class="two-column-layout">
            <div>
                <!-- Experience Section -->
                <div class="section" id="experienceSection">
                    <div class="section-title">Work Experience</div>
                    <div id="experienceList"></div>
                </div>

                <!-- Projects Section -->
                <div class="section" id="projectsSection">
                    <div class="section-title">Projects</div>
                    <div id="projectsList"></div>
                </div>
            </div>
            
            <div>
                <!-- Education Section -->
                <div class="section" id="educationSection">
                    <div class="section-title">Education</div>
                    <div id="educationList"></div>
                </div>
                
                <!-- Skills Section -->
                <div class="section" id="skillsSection">
                    <div class="section-title">Technical Skills</div>
                    <div class="skills-section" id="skillsList"></div>
                </div>
                
                <!-- Certifications Section -->
                <div class="section" id="certificationsSection">
                    <div class="section-title">Certifications</div>
                    <ul class="certifications-list" id="certificationsList"></ul>
                </div>
                
                <!-- Languages Section -->
                <div class="section" id="languagesSection">
                    <div class="section-title">Languages</div>
                    <ul class="languages-list" id="languagesList"></ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Function to render resume from JSON data
        function renderResume(userData) {
            // Basic Information
            document.getElementById('userName').textContent = userData.name || '';
            document.getElementById('userTitle').textContent = userData.title || '';
            document.getElementById('userSummary').textContent = userData.summary || '';
            
            // Contact Information
            renderContactInfo(userData.contact);
            
            // Experience Section
            renderExperience(userData.experience);
            
            // Projects Section
            renderProjects(userData.projects);
            
            // Education Section
            renderEducation(userData.education);
            
            // Skills Section
            renderSkills(userData.skills);
            
            // Certifications Section
            renderCertifications(userData.certifications);

            // Languages Section
            renderLanguages(userData.languages);
        }

        function renderContactInfo(contact) {
            if (!contact) return;
            
            const contactContainer = document.getElementById('contactInfo');
            let contactHTML = '';
            
            // First row: Address and Phone
            if (contact.address || contact.phone) {
                contactHTML += '<div class="contact-row">';
                contactHTML += `<span>${contact.address || ''}</span>`;
                contactHTML += `<span>${contact.phone ? 'Phone: ' + contact.phone : ''}</span>`;
                contactHTML += '</div>';
            }
            
            // Second row: Email and LinkedIn
            if (contact.email || contact.linkedin) {
                contactHTML += '<div class="contact-row">';
                contactHTML += `<span>${contact.email ? 'Email: ' + contact.email : ''}</span>`;
                contactHTML += `<span>${contact.linkedin ? 'LinkedIn: ' + contact.linkedin : ''}</span>`;
                contactHTML += '</div>';
            }

            // Third row: Website and GitHub (if available)
            if (contact.website || contact.github) {
                contactHTML += '<div class="contact-row">';
                contactHTML += `<span>${contact.website ? 'Website: ' + contact.website : ''}</span>`;
                contactHTML += `<span>${contact.github ? 'GitHub: ' + contact.github : ''}</span>`;
                contactHTML += '</div>';
            }
            
            contactContainer.innerHTML = contactHTML;
        }

        function renderExperience(experiences) {
            const container = document.getElementById('experienceList');
            const section = document.getElementById('experienceSection');
            
            if (!experiences || experiences.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            experiences.forEach(exp => {
                const bullets = Array.isArray(exp.description) ? exp.description : 
                            exp.description ? exp.description.split('\n').filter(item => item.trim()) : [];
                
                // Combine company and location with comma
                const companyName = exp.company || '';
                const location = exp.location || '';
                const companyWithLocation = location ? `${companyName}, ${location}` : companyName;
                
                // Use the date field directly
                const dateRange = exp.date || '';
                
                html += `
                    <div class="experience-item">
                        <div class="job-info">${exp.jobTitle || ''}</div>
                        <div class="company-location">${companyWithLocation}</div>
                        <div class="job-dates">${dateRange}</div>
                        ${bullets.length > 0 ? `
                        <div class="responsibilities">
                            <ul>
                                ${bullets.map(bullet => `<li>${bullet.replace(/^[•\-\*]\s*/, '')}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderProjects(projects) {
            const container = document.getElementById('projectsList');
            const section = document.getElementById('projectsSection');
            
            if (!projects || projects.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            projects.forEach(project => {
                const bullets = Array.isArray(project.description) ? project.description : 
                               project.description ? project.description.split('\n').filter(item => item.trim()) : [];
                
                html += `
                    <div class="projects-item">
                        <div class="project-info">${project.title || ''}</div>
                        ${project.technologies ? `<div class="project-tech">Technologies: ${project.technologies}</div>` : ''}
                        ${project.date ? `<div class="project-dates">${project.date}</div>` : ''}
                        ${project.summary ? `<div class="project-summary">${project.summary}</div>` : ''}
                        ${bullets.length > 0 ? `
                        <div class="responsibilities">
                            <ul>
                                ${bullets.map(bullet => `<li>${bullet.replace(/^[•\-\*]\s*/, '')}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderEducation(education) {
            const container = document.getElementById('educationList');
            const section = document.getElementById('educationSection');
            
            if (!education || education.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            education.forEach(edu => {
                // Clean the date by removing bullet point "·", spaces, and parentheses
                let cleanDate = edu.date || '';
                cleanDate = cleanDate.replace(/^\s*·\s*\(/, '').replace(/\)$/, '').trim();
                
                html += `
                    <div class="education-item">
                        <div class="degree-info">${edu.degree || ''}</div>
                        <div class="school-info">${edu.school || ''}${edu.location ? ', ' + edu.location : ''}</div>
                        <div class="education-dates">${cleanDate}</div>
                        ${edu.details ? `<div class="education-details">${edu.details}</div>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderSkills(skills) {
            const container = document.getElementById('skillsList');
            const section = document.getElementById('skillsSection');
            
            if (!skills || skills.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            skills.forEach(skillGroup => {
                const skillItems = Array.isArray(skillGroup.items) ? skillGroup.items : 
                                  skillGroup.items ? skillGroup.items.split(',').map(s => s.trim()) : [];
                
                html += `
                    <div class="skill-group">
                        <div class="skill-title">${skillGroup.category || ''}:</div>
                        <ul class="skill-list">
                            ${skillItems.map(skill => `<li>${skill}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderCertifications(certifications) {
            const container = document.getElementById('certificationsList');
            const section = document.getElementById('certificationsSection');
            
            if (!certifications || certifications.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            certifications.forEach(cert => {
                html += `
                    <li>
                        <span class="cert-name">${cert.name || ''}</span>
                        <span class="cert-date">${cert.date || ''}</span>
                    </li>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderLanguages(languages) {
            const container = document.getElementById('languagesList');
            const section = document.getElementById('languagesSection');
            
            if (!languages || languages.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            languages.forEach(lang => {
                const langText = typeof lang === 'string' ? lang : 
                                `${lang.language || ''} ${lang.proficiency ? '(' + lang.proficiency + ')' : ''}`;
                html += `<li>${langText}</li>`;
            });
            
            container.innerHTML = html;
        }

        // Example function to load data from backend
        async function loadUserData(userId) {
            try {
                // Replace this URL with your actual backend endpoint
                const response = await fetch(`/api/resume/${userId}`);
                const userData = await response.json();
                renderResume(userData);
            } catch (error) {
                console.error('Error loading user data:', error);
                // Load default data if backend fails
                loadDefaultData();
            }
        }

        // Function to load default sample data
        function loadDefaultData() {
            const sampleData = {
                name: "Jennifer Martinez",
                title: "Business Analyst",
                summary: "Detail-oriented Business Analyst with 5+ years of experience in data analysis, process improvement, and stakeholder management. Proven ability to translate complex business requirements into actionable solutions. Expertise in financial modeling, system analysis, and cross-functional collaboration to drive operational efficiency and business growth.",
                contact: {
                    address: "456 Oak Avenue, Chicago, IL 60601",
                    phone: "(312) 555-7890",
                    email: "jennifer.martinez@email.com",
                    linkedin: "linkedin.com/in/jennifermartinez"
                },
                experience: [
                    {
                        jobTitle: "Senior Business Analyst",
                        company: "Financial Services Corp",
                        location: "Chicago, IL",
                        startDate: "August 2021",
                        endDate: "Present",
                        description: [
                            "Analyzed business processes and identified opportunities for improvement, resulting in 25% increase in operational efficiency",
                            "Collaborated with IT teams to design and implement new reporting systems serving 500+ users",
                            "Conducted stakeholder interviews and documented functional requirements for system enhancements",
                            "Created financial models and dashboards to support executive decision-making",
                            "Led cross-functional project teams through system implementations and process changes"
                        ]
                    },
                    {
                        jobTitle: "Business Analyst",
                        company: "Metro Healthcare Solutions",
                        location: "Chicago, IL",
                        startDate: "January 2019",
                        endDate: "July 2021",
                        description: [
                            "Performed data analysis on patient care metrics and operational workflows",
                            "Developed process documentation and training materials for new procedures",
                            "Supported implementation of electronic health record system across 3 facilities",
                            "Created detailed business requirement documents and test plans",
                            "Facilitated meetings between clinical staff and technology teams"
                        ]
                    },
                    {
                        jobTitle: "Junior Business Analyst",
                        company: "Consulting Partners LLC",
                        location: "Evanston, IL",
                        startDate: "June 2017",
                        endDate: "December 2018",
                        description: [
                            "Assisted senior analysts with data collection and preliminary analysis",
                            "Prepared client presentations and status reports for project stakeholders",
                            "Conducted research on industry best practices and competitive analysis",
                            "Maintained project documentation and tracked deliverable timelines"
                        ]
                    }
                ],
                education: [
                    {
                        degree: "Master of Science in Business Analytics",
                        school: "Northwestern University",
                        location: "Evanston, IL",
                        date: "2015 - 2017",
                        details: "GPA: 3.8/4.0 | Graduate Research Assistant"
                    },
                    {
                        degree: "Bachelor of Science in Economics",
                        school: "University of Illinois at Chicago",
                        date: "2011 - 2015",
                        details: "Cum Laude | Economics Honor Society"
                    }
                ],
                skills: [
                    {
                        category: "Analytics",
                        items: ["SQL", "Python", "R", "Tableau", "Power BI"]
                    },
                    {
                        category: "Business",
                        items: ["Process Mapping", "Requirements Analysis", "Financial Modeling", "Project Management", "Stakeholder Management"]
                    },
                    {
                        category: "Software",
                        items: ["Microsoft Office Suite", "Visio", "Jira", "Confluence", "SharePoint"]
                    }
                ],
                certifications: [
                    {
                        name: "Certified Business Analysis Professional (CBAP)",
                        date: "2022"
                    },
                    {
                        name: "Tableau Desktop Specialist",
                        date: "2021"
                    },
                    {
                        name: "Microsoft Excel Expert",
                        date: "2020"
                    }
                ],
                languages: [
                    "English (Native)",
                    "Spanish (Fluent)",
                    "French (Conversational)"
                ]
            };
            
            renderResume(sampleData);
        }

        // Initialize with sample data on page load
        window.onload = function() {
            loadDefaultData();
            
            // Example: Load specific user data
            // loadUserData('user123');
        };

        // Global function to update resume with new data
        window.updateResume = renderResume;
    </script>
</body>
</html>