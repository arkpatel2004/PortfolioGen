<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Modern Two-Column Resume</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            line-height: 1.5;
            color: #333;
            background: #f0f2f5;
            padding: 20px;
        }
        
        .resume-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            display: flex;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            min-height: 11in;
        }
        
        .sidebar {
            background: #34495e;
            color: white;
            width: 300px;
            padding: 40px 30px;
            flex-shrink: 0;
        }
        
        .profile-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .profile-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #2c3e50;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #ecf0f1;
            border: 4px solid #ecf0f1;
            overflow: hidden;
        }

        .profile-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        .name {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ecf0f1;
        }
        
        .job-title {
            font-size: 1em;
            color: #bdc3c7;
            margin-bottom: 20px;
        }
        
        .contact-section, .skills-section {
            margin-bottom: 35px;
        }

        .contact-section.hidden, .skills-section.hidden {
            display: none;
        }
        
        .section-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #ecf0f1;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            color: #bdc3c7;
            font-size: 0.9em;
        }
        
        .contact-icon {
            width: 20px;
            margin-right: 12px;
            text-align: center;
        }
        
        .skill-item {
            margin-bottom: 15px;
        }
        
        .skill-name {
            font-size: 0.9em;
            margin-bottom: 5px;
            color: #ecf0f1;
        }
        
        .skill-bar {
            background: #2c3e50;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .skill-progress {
            background: linear-gradient(90deg, #3498db, #2980b9);
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .main-content {
            flex: 1;
            padding: 40px;
            background: white;
        }
        
        .header {
            margin-bottom: 35px;
        }
        
        .summary {
            background: #f8f9fa;
            padding: 25px;
            border-left: 4px solid #3498db;
            margin-bottom: 35px;
            border-radius: 0 6px 6px 0;
        }

        .summary.hidden {
            display: none;
        }
        
        .summary-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 12px;
        }
        
        .summary-text {
            color: #555;
            line-height: 1.7;
        }
        
        .section {
            margin-bottom: 35px;
        }

        .section.hidden {
            display: none;
        }
        
        .main-section-title {
            font-size: 1.3em;
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 20px;
            position: relative;
            padding-left: 20px;
        }
        
        .main-section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: #3498db;
            border-radius: 50%;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 30px;
            margin-bottom: 25px;
            border-left: 2px solid #ecf0f1;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 8px;
            width: 10px;
            height: 10px;
            background: #3498db;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        .timeline-item:last-child {
            border-left-color: transparent;
        }
        
        .position-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .company-name {
            color: #3498db;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .timeline-date {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-style: italic;
        }
        
        .job-description {
            color: #555;
            line-height: 1.6;
        }
        
        .job-description ul {
            margin: 8px 0;
            padding-left: 20px;
        }
        
        .job-description li {
            margin-bottom: 4px;
            color: #666;
        }
        
        .education-item, .certification-item {
            margin-bottom: 20px;
        }
        
        .degree {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.05em;
        }
        
        .institution {
            color: #3498db;
            font-weight: 500;
            margin: 3px 0;
        }
        
        .education-date {
            color: #7f8c8d;
            font-size: 0.9em;
            font-style: italic;
        }
        
        .education-details {
            color: #666;
            margin-top: 5px;
            font-size: 0.95em;
        }

        .project-item {
            position: relative;
            padding-left: 30px;
            margin-bottom: 25px;
            border-left: 2px solid #ecf0f1;
        }

        .project-item::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 8px;
            width: 10px;
            height: 10px;
            background: #3498db;
            border-radius: 50%;
            border: 2px solid white;
        }

        .project-item:last-child {
            border-left-color: transparent;
        }

        .project-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .project-tech {
            color: #3498db;
            font-weight: 500;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .project-summary {
            color: #555;
            font-style: italic;
            margin-bottom: 8px;
        }
        
        @media print {
            body { 
                background: white; 
                padding: 0; 
            }
            .resume-container { 
                box-shadow: none; 
                border-radius: 0;
                max-width: none;
                margin: 0;
            }
        }
        
        @media (max-width: 768px) {
            .resume-container {
                flex-direction: column;
                margin: 10px;
            }
            .sidebar {
                width: 100%;
                padding: 30px 20px;
            }
            .main-content {
                padding: 30px 20px;
            }
            .profile-photo {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }
            .name {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="resume-container" id="resume">
        <div class="sidebar">
            <div class="profile-section">
                <div class="profile-photo" id="profilePhoto">
                    👤
                </div>
                <div class="name" id="userName"></div>
                <div class="job-title" id="userTitle"></div>
            </div>
            
            <div class="contact-section" id="contactSection">
                <div class="section-title">Contact</div>
                <div id="contactList"></div>
            </div>
            
            <div class="skills-section" id="skillsSection">
                <div class="section-title">Skills</div>
                <div id="skillsList"></div>
            </div>
            
            <div class="skills-section" id="languagesSection">
                <div class="section-title">Languages</div>
                <div id="languagesList"></div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="summary" id="summarySection">
                <div class="summary-title" id="summaryTitle">Professional Summary</div>
                <div class="summary-text" id="summaryText"></div>
            </div>
            
            <div class="section" id="experienceSection">
                <div class="main-section-title">Work Experience</div>
                <div id="experienceList"></div>
            </div>

            <div class="section" id="projectsSection">
                <div class="main-section-title">Projects</div>
                <div id="projectsList"></div>
            </div>
            
            <div class="section" id="educationSection">
                <div class="main-section-title">Education</div>
                <div id="educationList"></div>
            </div>
            
            <div class="section" id="certificationsSection">
                <div class="main-section-title">Certifications & Awards</div>
                <div id="certificationsList"></div>
            </div>
        </div>
    </div>

    <script>
        // Function to render resume from JSON data
        function renderResume(userData) {
            // Basic Information
            document.getElementById('userName').textContent = userData.name || '';
            document.getElementById('userTitle').textContent = userData.title || '';
            
            // Profile Photo
            renderProfilePhoto(userData.photo);
            
            // Contact Information
            renderContactInfo(userData.contact);
            
            // Summary
            renderSummary(userData.summary, userData.objective);
            
            // Skills
            renderSkills(userData.skills);
            
            // Languages
            renderLanguages(userData.languages);
            
            // Experience
            renderExperience(userData.experience);
            
            // Projects
            renderProjects(userData.projects);
            
            // Education
            renderEducation(userData.education);
            
            // Certifications
            renderCertifications(userData.certifications);
        }

        function renderProfilePhoto(photo) {
            const photoContainer = document.getElementById('profilePhoto');
            if (photo) {
                photoContainer.innerHTML = `<img src="${photo}" alt="Profile Photo" />`;
            } else {
                photoContainer.innerHTML = '👤';
            }
        }

        function renderContactInfo(contact) {
            const container = document.getElementById('contactList');
            const section = document.getElementById('contactSection');
            
            if (!contact) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            if (contact.email) {
                html += `
                    <div class="contact-item">
                        <span class="contact-icon">📧</span>
                        <span>${contact.email}</span>
                    </div>
                `;
            }
            
            if (contact.phone) {
                html += `
                    <div class="contact-item">
                        <span class="contact-icon">📱</span>
                        <span>${contact.phone}</span>
                    </div>
                `;
            }
            
            if (contact.location) {
                html += `
                    <div class="contact-item">
                        <span class="contact-icon">📍</span>
                        <span>${contact.location}</span>
                    </div>
                `;
            }
            
            if (contact.linkedin) {
                html += `
                    <div class="contact-item">
                        <span class="contact-icon">💼</span>
                        <span>${contact.linkedin}</span>
                    </div>
                `;
            }
            
            if (contact.website) {
                html += `
                    <div class="contact-item">
                        <span class="contact-icon">🌐</span>
                        <span>${contact.website}</span>
                    </div>
                `;
            }

            if (contact.github) {
                html += `
                    <div class="contact-item">
                        <span class="contact-icon">🔗</span>
                        <span>${contact.github}</span>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        function renderSummary(summary, objective) {
            const section = document.getElementById('summarySection');
            const title = document.getElementById('summaryTitle');
            const text = document.getElementById('summaryText');
            
            if (summary) {
                title.textContent = 'Professional Summary';
                text.textContent = summary;
                section.classList.remove('hidden');
            } else if (objective) {
                title.textContent = 'Objective';
                text.textContent = objective;
                section.classList.remove('hidden');
            } else {
                section.classList.add('hidden');
            }
        }

        function renderSkills(skills) {
            const container = document.getElementById('skillsList');
            const section = document.getElementById('skillsSection');
            
            // Extract items from 'Technologies' category
            let skillItems = [];
            if (skills && Array.isArray(skills)) {
                const techCategory = skills.find(category => 
                    category.category === 'Technologies' 
                );
                if (techCategory && Array.isArray(techCategory.items)) {
                    skillItems = techCategory.items;
                }
            }
            
            // If no skills found, hide the section
            if (skillItems.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            skillItems.forEach(skill => {
                const skillName = typeof skill === 'string' ? skill : (skill.name || skill);
                const skillLevel = typeof skill === 'object' ? (skill.level || 75) : 75;
                
                html += `
                    <div class="skill-item">
                        <div class="skill-name">${skillName}</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: ${skillLevel}%;"></div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }



        function renderLanguages(languages) {
            const container = document.getElementById('languagesList');
            const section = document.getElementById('languagesSection');
            
            if (!languages || languages.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            languages.forEach(lang => {
                const langName = typeof lang === 'string' ? lang.split(' (')[0] : lang.name;
                const langLevel = typeof lang === 'object' ? (lang.level || 75) : 
                                 typeof lang === 'string' && lang.includes('Native') ? 100 :
                                 typeof lang === 'string' && lang.includes('Fluent') ? 90 :
                                 typeof lang === 'string' && lang.includes('Conversational') ? 60 : 75;
                
                html += `
                    <div class="skill-item">
                        <div class="skill-name">${langName}</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: ${langLevel}%;"></div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderExperience(experiences) {
            const container = document.getElementById('experienceList');
            const section = document.getElementById('experienceSection');
            
            if (!experiences || experiences.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            experiences.forEach(exp => {
                const bullets = Array.isArray(exp.description) ? exp.description : 
                            exp.description ? exp.description.split('\n').filter(item => item.trim()) : [];
                
                // Combine company and location with comma
                const companyName = exp.company || '';
                const location = exp.location || '';
                const companyWithLocation = location ? `${companyName}, ${location}` : companyName;
                
                // Use the date field directly
                const dateRange = exp.date || '';
                
                html += `
                    <div class="timeline-item">
                        <div class="position-title">${exp.jobTitle || ''}</div>
                        <div class="company-name">${companyWithLocation}</div>
                        <div class="timeline-date">${dateRange}</div>
                        ${bullets.length > 0 ? `
                        <div class="job-description">
                            <ul>
                                ${bullets.map(bullet => `<li>${bullet.replace(/^[•\-\*]\s*/, '')}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }


        function renderProjects(projects) {
            const container = document.getElementById('projectsList');
            const section = document.getElementById('projectsSection');
            
            if (!projects || projects.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            projects.forEach(project => {
                const bullets = Array.isArray(project.description) ? project.description : 
                               project.description ? project.description.split('\n').filter(item => item.trim()) : [];
                
                html += `
                    <div class="project-item">
                        <div class="project-title">${project.title || ''}</div>
                        ${project.technologies ? `<div class="project-tech">Technologies: ${project.technologies}</div>` : ''}
                        ${project.date ? `<div class="timeline-date">${project.date}</div>` : ''}
                        ${project.summary ? `<div class="project-summary">${project.summary}</div>` : ''}
                        ${bullets.length > 0 ? `
                        <div class="job-description">
                            <ul>
                                ${bullets.map(bullet => `<li>${bullet.replace(/^[•\-\*]\s*/, '')}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderEducation(education) {
            const container = document.getElementById('educationList');
            const section = document.getElementById('educationSection');
            
            if (!education || education.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            education.forEach(edu => {
                // Clean the date by removing "- (" and ")"
                let cleanDate = edu.date || '';
                cleanDate = cleanDate.replace(/- \(/g, ' ').replace(/\)/g, '');
                
                html += `
                    <div class="education-item">
                        <div class="degree">${edu.degree || ''}</div>
                        <div class="institution">${edu.school || ''}</div>
                        <div class="education-date">${cleanDate}</div>
                        ${edu.details ? `<div class="education-details">${edu.details}</div>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }


        function renderCertifications(certifications) {
            const container = document.getElementById('certificationsList');
            const section = document.getElementById('certificationsSection');
            
            if (!certifications || certifications.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            certifications.forEach(cert => {
                html += `
                    <div class="certification-item">
                        <div class="degree">${cert.name || ''}</div>
                        <div class="education-date">${cert.date || ''}</div>
                        ${cert.details ? `<div class="education-details">${cert.details}</div>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Example function to load data from backend
        async function loadUserData(userId) {
            try {
                const response = await fetch(`/api/resume/${userId}`);
                const userData = await response.json();
                renderResume(userData);
            } catch (error) {
                console.error('Error loading user data:', error);
                loadDefaultData();
            }
        }

        // Function to load default sample data
        function loadDefaultData() {
            const sampleData = {
                name: "Sarah Johnson",
                title: "Marketing Manager",
                photo: null, // Set to image URL if available
                summary: "Creative and results-driven Marketing Manager with 7+ years of experience in developing and executing comprehensive marketing strategies. Expertise in digital marketing, brand management, and campaign optimization. Proven track record of increasing brand awareness by 150% and driving revenue growth through innovative marketing initiatives.",
                contact: {
                    email: "sarah.johnson@email.com",
                    phone: "+1 (555) 987-6543",
                    location: "New York, NY",
                    linkedin: "linkedin.com/in/sarahjohnson",
                    website: "sarahjohnson.com"
                },
                skills: [
                    { name: "Digital Marketing", level: 95 },
                    { name: "Content Strategy", level: 90 },
                    { name: "Google Analytics", level: 85 },
                    { name: "Social Media", level: 92 },
                    { name: "Adobe Creative Suite", level: 78 },
                    { name: "Email Marketing", level: 88 },
                    { name: "Project Management", level: 82 }
                ],
                languages: [
                    { name: "English", level: 100 },
                    { name: "Spanish", level: 75 },
                    { name: "French", level: 60 }
                ],
                experience: [
                    {
                        jobTitle: "Senior Marketing Manager",
                        company: "Digital Innovations Corp",
                        startDate: "March 2021",
                        endDate: "Present",
                        description: [
                            "Led cross-functional team of 8 marketing professionals to develop integrated campaigns",
                            "Increased organic website traffic by 250% through SEO optimization and content strategy",
                            "Managed marketing budget of $2M+ and achieved 35% ROI improvement",
                            "Launched 3 successful product campaigns generating $5M+ in revenue",
                            "Implemented marketing automation workflows increasing lead conversion by 45%"
                        ]
                    },
                    {
                        jobTitle: "Marketing Specialist",
                        company: "Creative Solutions Agency",
                        startDate: "June 2019",
                        endDate: "February 2021",
                        description: [
                            "Developed and executed social media strategies for 15+ client accounts",
                            "Created compelling content that increased engagement rates by 180%",
                            "Managed paid advertising campaigns with monthly budgets up to $500K",
                            "Collaborated with design team to produce high-impact marketing materials",
                            "Analyzed campaign performance and provided strategic recommendations"
                        ]
                    },
                    {
                        jobTitle: "Digital Marketing Coordinator",
                        company: "TechStart Solutions",
                        startDate: "September 2017",
                        endDate: "May 2019",
                        description: [
                            "Coordinated email marketing campaigns reaching 100K+ subscribers",
                            "Managed company blog and increased readership by 200%",
                            "Assisted in planning and executing trade show presentations",
                            "Conducted market research and competitive analysis",
                            "Supported senior marketing team with campaign development and execution"
                        ]
                    }
                ],
                education: [
                    {
                        degree: "Master of Business Administration (MBA)",
                        school: "Columbia Business School",
                        date: "2015 - 2017",
                        details: "Concentration: Marketing & Digital Strategy • GPA: 3.9/4.0 • Dean's List"
                    },
                    {
                        degree: "Bachelor of Science in Marketing",
                        school: "New York University",
                        date: "2011 - 2015",
                        details: "Magna Cum Laude • Marketing Club President • Phi Beta Kappa Honor Society"
                    }
                ],
                certifications: [
                    {
                        name: "Google Analytics Certified",
                        date: "2023"
                    },
                    {
                        name: "HubSpot Content Marketing Certification",
                        date: "2022"
                    },
                    {
                        name: "Facebook Blueprint Certified",
                        date: "2022"
                    },
                    {
                        name: "Marketing Excellence Award - Digital Innovations Corp",
                        date: "2023"
                    }
                ]
            };
            
            renderResume(sampleData);
        }

        // Initialize with sample data on page load
        window.onload = function() {
            loadDefaultData();
        };

        // Global function to update resume with new data
        window.updateResume = renderResume;
    </script>
</body>
</html>
