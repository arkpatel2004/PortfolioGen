<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Professional Resume</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            color: #000;
            background: #f9f9f9;
            padding: 20px;
            font-size: 12pt;
        }
        
        .resume-container {
            max-width: 8.5in;
            margin: 0 auto;
            background: white;
            padding: 0.5in;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-radius: 5px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #000;
            padding-bottom: 20px;
        }
        
        .name {
            font-size: 24pt;
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .contact-line {
            margin-bottom: 4px;
            font-size: 11pt;
        }
        
        .section {
            margin-bottom: 25px;
        }

        .section.hidden {
            display: none;
        }
        
        .section-title {
            font-size: 14pt;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #000;
            margin-bottom: 15px;
            padding-bottom: 3px;
        }
        
        .experience-item, .education-item, .certification-item {
            margin-bottom: 20px;
        }
        
        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 5px;
        }
        
        .job-title {
            font-weight: bold;
            font-size: 12pt;
        }
        
        .job-date {
            font-style: italic;
            font-size: 11pt;
        }
        
        .company-name {
            font-size: 11pt;
            margin-bottom: 8px;
        }
        
        .job-description {
            margin-left: 20px;
        }
        
        .job-description ul {
            list-style-type: disc;
            margin-left: 20px;
        }
        
        .job-description li {
            margin-bottom: 3px;
            text-align: justify;
        }
        
        .education-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .degree {
            font-weight: bold;
            font-size: 12pt;
        }
        
        .school {
            font-size: 11pt;
            margin-bottom: 5px;
        }
        
        .education-details {
            font-size: 11pt;
            margin-top: 5px;
        }
        
        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .skill-category {
            min-width: 200px;
        }
        
        .skill-category-title {
            font-weight: bold;
            margin-bottom: 5px;
            text-decoration: underline;
        }
        
        .objective-text {
            text-align: justify;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .projects-item {
            margin-bottom: 20px;
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 5px;
        }

        .project-title {
            font-weight: bold;
            font-size: 12pt;
        }

        .project-tech {
            font-size: 11pt;
            margin-bottom: 8px;
            font-style: italic;
        }

        .project-description {
            margin-left: 20px;
        }

        .project-description ul {
            list-style-type: disc;
            margin-left: 20px;
        }

        .project-description li {
            margin-bottom: 3px;
            text-align: justify;
        }

        .certification-item {
            margin-bottom: 15px;
        }

        .certification-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .cert-name {
            font-weight: bold;
            font-size: 12pt;
        }

        .cert-details {
            font-size: 11pt;
            margin-top: 5px;
        }
        
        @media print {
            body { 
                padding: 0; 
            }
            .resume-container { 
                margin: 0;
                padding: 0;
                max-width: none;
            }
        }
        
        @media (max-width: 768px) {
            .job-header, .education-header, .project-header, .certification-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .job-date {
                margin-top: 5px;
            }
            .skills-list {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="resume-container" id="resume">
        <div class="header">
            <div class="name" id="userName"></div>
            <div id="contactInfo"></div>
        </div>
        
        <!-- Objective Section -->
        <div class="section" id="objectiveSection">
            <div class="section-title">Objective</div>
            <div class="objective-text" id="userObjective"></div>
        </div>

        <!-- Summary Section (alternative to objective) -->
        <div class="section" id="summarySection">
            <div class="section-title">Professional Summary</div>
            <div class="objective-text" id="userSummary"></div>
        </div>
        
        <!-- Experience Section -->
        <div class="section" id="experienceSection">
            <div class="section-title">Professional Experience</div>
            <div id="experienceList"></div>
        </div>

        <!-- Projects Section -->
        <div class="section" id="projectsSection">
            <div class="section-title">Projects</div>
            <div id="projectsList"></div>
        </div>
        
        <!-- Education Section -->
        <div class="section" id="educationSection">
            <div class="section-title">Education</div>
            <div id="educationList"></div>
        </div>
        
        <!-- Skills Section -->
        <div class="section" id="skillsSection">
            <div class="section-title">Technical Skills</div>
            <div class="skills-list" id="skillsList"></div>
        </div>
        
        <!-- Certifications Section -->
        <div class="section" id="certificationsSection">
            <div class="section-title">Certifications</div>
            <div id="certificationsList"></div>
        </div>
    </div>

    <script>
        // Function to render resume from JSON data
        function renderResume(userData) {
            // Basic Information
            document.getElementById('userName').textContent = userData.name || '';
            
            // Contact Information
            renderContactInfo(userData.contact);
            
            // Objective or Summary
            renderObjectiveOrSummary(userData);
            
            // Experience Section
            renderExperience(userData.experience);
            
            // Projects Section
            renderProjects(userData.projects);
            
            // Education Section
            renderEducation(userData.education);
            
            // Skills Section
            renderSkills(userData.skills);
            
            // Certifications Section
            renderCertifications(userData.certifications);
        }

        function renderContactInfo(contact) {
            if (!contact) return;
            
            const contactContainer = document.getElementById('contactInfo');
            let contactHTML = '';
            
            // Address line
            if (contact.address) {
                contactHTML += `<div class="contact-line">${contact.address}</div>`;
            }
            
            // Phone and Email line
            const phoneEmail = [];
            if (contact.phone) phoneEmail.push(`Phone: ${contact.phone}`);
            if (contact.email) phoneEmail.push(`Email: ${contact.email}`);
            if (phoneEmail.length > 0) {
                contactHTML += `<div class="contact-line">${phoneEmail.join(' | ')}</div>`;
            }
            
            // LinkedIn and Portfolio/Website line
            const links = [];
            if (contact.linkedin) links.push(`LinkedIn: ${contact.linkedin}`);
            if (contact.website) links.push(`Portfolio: ${contact.website}`);
            if (contact.github) links.push(`GitHub: ${contact.github}`);
            if (links.length > 0) {
                contactHTML += `<div class="contact-line">${links.join(' | ')}</div>`;
            }
            
            contactContainer.innerHTML = contactHTML;
        }

        function renderObjectiveOrSummary(userData) {
            const objectiveSection = document.getElementById('objectiveSection');
            const summarySection = document.getElementById('summarySection');
            
            if (userData.objective) {
                document.getElementById('userObjective').textContent = userData.objective;
                objectiveSection.classList.remove('hidden');
                summarySection.classList.add('hidden');
            } else if (userData.summary) {
                document.getElementById('userSummary').textContent = userData.summary;
                summarySection.classList.remove('hidden');
                objectiveSection.classList.add('hidden');
            } else {
                objectiveSection.classList.add('hidden');
                summarySection.classList.add('hidden');
            }
        }

        function renderExperience(experiences) {
            const container = document.getElementById('experienceList');
            const section = document.getElementById('experienceSection');
            
            if (!experiences || experiences.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            experiences.forEach(exp => {
                const bullets = Array.isArray(exp.description) ? exp.description : 
                            exp.description ? exp.description.split('\n').filter(item => item.trim()) : [];
                
                // Use the 'date' field directly and place it on the right side
                const dateRange = exp.date || '';
                
                // Combine company and location with comma
                const companyName = exp.company || '';
                const location = exp.location || '';
                const companyWithLocation = location ? `${companyName}, ${location}` : companyName;
                
                html += `
                    <div class="experience-item">
                        <div class="job-header">
                            <div class="job-title">${exp.jobTitle || ''}</div>
                            <div class="job-date">${dateRange}</div>
                        </div>
                        <div class="company-name">${companyWithLocation}</div>
                        ${bullets.length > 0 ? `
                        <div class="job-description">
                            <ul>
                                ${bullets.map(bullet => `<li>${bullet.replace(/^[•\-\*]\s*/, '')}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }


        function renderProjects(projects) {
            const container = document.getElementById('projectsList');
            const section = document.getElementById('projectsSection');
            
            if (!projects || projects.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            projects.forEach(project => {
                const bullets = Array.isArray(project.description) ? project.description : 
                               project.description ? project.description.split('\n').filter(item => item.trim()) : [];
                
                html += `
                    <div class="projects-item">
                        <div class="project-header">
                            <div>
                                <div class="project-title">${project.title || ''}</div>
                                ${project.technologies ? `<div class="project-tech">Technologies: ${project.technologies}</div>` : ''}
                            </div>
                            ${project.date ? `<div class="job-date">${project.date}</div>` : ''}
                        </div>
                        ${project.summary ? `<div style="margin-bottom: 8px; font-style: italic;">${project.summary}</div>` : ''}
                        ${bullets.length > 0 ? `
                        <div class="project-description">
                            <ul>
                                ${bullets.map(bullet => `<li>${bullet.replace(/^[•\-\*]\s*/, '')}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderEducation(education) {
            const container = document.getElementById('educationList');
            const section = document.getElementById('educationSection');
            
            if (!education || education.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            education.forEach(edu => {
                // Clean the date by removing bullet point "·", spaces, and parentheses
                let cleanDate = edu.date || '';
                cleanDate = cleanDate.replace(/^\s*·\s*\(/, '').replace(/\)$/, '').trim();
                
                html += `
                    <div class="education-item">
                        <div class="education-header">
                            <div>
                                <div class="degree">${edu.degree || ''}</div>
                                <div class="school">${edu.school || ''}${edu.location ? ', ' + edu.location : ''}</div>
                            </div>
                            <div class="job-date">${cleanDate}</div>
                        </div>
                        ${edu.details ? `<div class="education-details">${edu.details}</div>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }


        function renderSkills(skills) {
            const container = document.getElementById('skillsList');
            const section = document.getElementById('skillsSection');
            
            if (!skills || skills.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            skills.forEach(skillGroup => {
                const skillItems = Array.isArray(skillGroup.items) ? 
                                  skillGroup.items.join(', ') : skillGroup.items || '';
                
                html += `
                    <div class="skill-category">
                        <div class="skill-category-title">${skillGroup.category || ''}:</div>
                        <div>${skillItems}</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderCertifications(certifications) {
            const container = document.getElementById('certificationsList');
            const section = document.getElementById('certificationsSection');
            
            if (!certifications || certifications.length === 0) {
                section.classList.add('hidden');
                return;
            }
            
            section.classList.remove('hidden');
            let html = '';
            
            certifications.forEach(cert => {
                html += `
                    <div class="certification-item">
                        <div class="certification-header">
                            <div class="cert-name">${cert.name || ''}</div>
                            <div class="job-date">${cert.date || ''}</div>
                        </div>
                        ${cert.details ? `<div class="cert-details">${cert.details}</div>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Example function to load data from backend
        async function loadUserData(userId) {
            try {
                // Replace this URL with your actual backend endpoint
                const response = await fetch(`/api/resume/${userId}`);
                const userData = await response.json();
                renderResume(userData);
            } catch (error) {
                console.error('Error loading user data:', error);
                // Load default data if backend fails
                loadDefaultData();
            }
        }

        // Function to load default sample data
        function loadDefaultData() {
            const sampleData = {
                name: "David Wilson",
                objective: "Experienced project manager with over 8 years of expertise in leading cross-functional teams and delivering complex projects on time and within budget. Seeking to leverage proven track record in process improvement and stakeholder management to drive organizational success in a senior management role.",
                contact: {
                    address: "123 Main Street, Boston, MA 02101",
                    phone: "(555) 123-4567",
                    email: "david.wilson@email.com",
                    linkedin: "linkedin.com/in/davidwilson",
                    website: "davidwilson.com"
                },
                experience: [
                    {
                        jobTitle: "Senior Project Manager",
                        company: "Global Tech Solutions",
                        location: "Boston, MA",
                        startDate: "January 2020",
                        endDate: "Present",
                        description: [
                            "Managed portfolio of 12+ concurrent projects with combined budget exceeding $5 million annually",
                            "Led cross-functional teams of 15-25 members including developers, designers, and business analysts",
                            "Implemented Agile methodologies resulting in 30% improvement in project delivery timelines",
                            "Developed and maintained project documentation, risk assessments, and stakeholder communications",
                            "Coordinated with C-level executives and department heads to align project objectives with business goals",
                            "Achieved 95% project success rate with zero budget overruns in the past three years"
                        ]
                    },
                    {
                        jobTitle: "Project Manager",
                        company: "Innovation Systems Inc.",
                        location: "Cambridge, MA",
                        startDate: "March 2018",
                        endDate: "December 2019",
                        description: [
                            "Oversaw software development projects from initiation through deployment and maintenance",
                            "Facilitated daily standups, sprint planning, and retrospective meetings for development teams",
                            "Collaborated with product owners to define project scope and deliverable requirements",
                            "Managed project budgets ranging from $500K to $1.5M and ensured cost-effective resource allocation",
                            "Established quality assurance processes that reduced post-deployment issues by 40%",
                            "Mentored junior project coordinators and provided training on project management best practices"
                        ]
                    },
                    {
                        jobTitle: "Project Coordinator",
                        company: "TechStart Consulting",
                        location: "Boston, MA",
                        startDate: "June 2016",
                        endDate: "February 2018",
                        description: [
                            "Assisted senior project managers in planning and executing client projects and deliverables",
                            "Maintained project schedules, tracked milestones, and prepared status reports for stakeholders",
                            "Coordinated meetings, managed project documentation, and facilitated communication between teams",
                            "Supported business analysis activities including requirements gathering and process mapping",
                            "Participated in client meetings and contributed to project proposals and presentations"
                        ]
                    }
                ],
                education: [
                    {
                        degree: "Master of Business Administration (MBA)",
                        school: "Boston University, Questrom School of Business",
                        location: "Boston, MA",
                        date: "2014 – 2016",
                        details: "Concentration: Operations Management | GPA: 3.7/4.0 | Dean's List (4 semesters)"
                    },
                    {
                        degree: "Bachelor of Science in Business Administration",
                        school: "Northeastern University",
                        location: "Boston, MA",
                        date: "2010 – 2014",
                        details: "Magna Cum Laude | Phi Beta Kappa Honor Society | Business Student Association President"
                    }
                ],
                skills: [
                    {
                        category: "Project Management",
                        items: "Agile, Scrum, Waterfall, Kanban, Risk Management, Budget Management"
                    },
                    {
                        category: "Software",
                        items: "Microsoft Project, Jira, Confluence, Trello, Slack, Monday.com, Excel"
                    },
                    {
                        category: "Analysis",
                        items: "Process Improvement, Data Analysis, Requirements Gathering, Quality Assurance"
                    }
                ],
                certifications: [
                    {
                        name: "Project Management Professional (PMP)",
                        date: "2021"
                    },
                    {
                        name: "Certified Scrum Master (CSM)",
                        date: "2020"
                    },
                    {
                        name: "Six Sigma Green Belt",
                        date: "2019"
                    }
                ]
            };
            
            renderResume(sampleData);
        }

        // Initialize with sample data on page load
        window.onload = function() {
            loadDefaultData();
            
            // Example: Load specific user data
            // loadUserData('user123');
        };

        // Global function to update resume with new data
        window.updateResume = renderResume;
    </script>
</body>
</html>